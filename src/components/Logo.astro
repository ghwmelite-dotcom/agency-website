---
interface Props {
  variant?: 'default' | 'light' | 'dark';
  size?: 'sm' | 'md' | 'lg';
  showText?: boolean;
}

const { variant = 'default', size = 'md', showText = true } = Astro.props;

const sizes = {
  sm: { icon: 36, text: '1.25rem' },
  md: { icon: 42, text: '1.5rem' },
  lg: { icon: 52, text: '2rem' }
};
---

<div class={`logo-container logo-${variant} logo-${size}`}>
  <!-- Modern Layered Logo Icon (inspired by chat widget) -->
  <svg
    class="logo-icon"
    width={sizes[size].icon}
    height={sizes[size].icon}
    viewBox="0 0 100 100"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <defs>
      <!-- Premium Gradient (matching chat widget) -->
      <linearGradient id="logo-gradient-main" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
      </linearGradient>

      <!-- Secondary Gradient -->
      <linearGradient id="logo-gradient-accent" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
        <stop offset="100%" style="stop-color:#ec4899;stop-opacity:1" />
      </linearGradient>

      <!-- Glow Filter -->
      <filter id="logo-glow">
        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
        <feMerge>
          <feMergeNode in="coloredBlur"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>

    <!-- Layered geometric design (like chat widget) -->
    <g filter="url(#logo-glow)">
      <!-- Top Layer - Filled Diamond -->
      <path
        class="logo-layer-top"
        d="M 50 20 L 25 40 L 50 50 L 75 40 Z"
        fill="url(#logo-gradient-main)"
        opacity="0.9"
      />

      <!-- Middle Layer - Stroke Only -->
      <path
        class="logo-layer-middle"
        d="M 25 52 L 50 65 L 75 52"
        stroke="url(#logo-gradient-main)"
        stroke-width="3"
        stroke-linecap="round"
        stroke-linejoin="round"
      />

      <!-- Bottom Layer - Stroke Only -->
      <path
        class="logo-layer-bottom"
        d="M 25 65 L 50 78 L 75 65"
        stroke="url(#logo-gradient-accent)"
        stroke-width="3"
        stroke-linecap="round"
        stroke-linejoin="round"
      />

      <!-- Center Dot - Signature Element -->
      <circle
        class="logo-center-dot"
        cx="50"
        cy="40"
        r="2.5"
        fill="white"
        opacity="1"
      />

      <!-- Accent Dots on Layers -->
      <circle class="logo-dot logo-dot-1" cx="50" cy="65" r="2" fill="url(#logo-gradient-main)" opacity="0.8" />
      <circle class="logo-dot logo-dot-2" cx="50" cy="78" r="2" fill="url(#logo-gradient-accent)" opacity="0.8" />
    </g>
  </svg>

  <!-- Logo Text -->
  {showText && (
    <span class="logo-text" style={`font-size: ${sizes[size].text}`} id="logo-text-dynamic">
      <span class="logo-text-primary">Hodges</span>
      <span class="logo-text-secondary">&</span>
      <span class="logo-text-accent">Co.</span>
    </span>
  )}
</div>

<style>
  .logo-container {
    display: flex;
    align-items: center;
    gap: 0.875rem;
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .logo-container:hover {
    transform: translateY(-1px);
  }

  /* Logo Icon Styles */
  .logo-icon {
    flex-shrink: 0;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .logo-container:hover .logo-icon {
    filter: drop-shadow(0 6px 20px rgba(102, 126, 234, 0.4));
    transform: scale(1.05);
  }

  /* Top Layer Animation - Subtle Float */
  .logo-layer-top {
    animation: float-layer 3s ease-in-out infinite;
    transform-origin: 50px 35px;
  }

  @keyframes float-layer {
    0%, 100% {
      transform: translateY(0px);
      opacity: 0.9;
    }
    50% {
      transform: translateY(-2px);
      opacity: 1;
    }
  }

  /* Middle Layer Animation */
  .logo-layer-middle {
    animation: pulse-layer-middle 2.5s ease-in-out infinite;
  }

  @keyframes pulse-layer-middle {
    0%, 100% {
      stroke-width: 3;
      opacity: 1;
    }
    50% {
      stroke-width: 3.5;
      opacity: 0.8;
    }
  }

  /* Bottom Layer Animation */
  .logo-layer-bottom {
    animation: pulse-layer-bottom 3s ease-in-out infinite;
    animation-delay: 0.3s;
  }

  @keyframes pulse-layer-bottom {
    0%, 100% {
      stroke-width: 3;
      opacity: 1;
    }
    50% {
      stroke-width: 3.5;
      opacity: 0.7;
    }
  }

  /* Center Dot Pulse */
  .logo-center-dot {
    animation: pulse-center-dot 2s ease-in-out infinite;
  }

  @keyframes pulse-center-dot {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.4);
      opacity: 0.8;
    }
  }

  /* Dot Animations */
  .logo-dot {
    animation: pulse-dot 2s ease-in-out infinite;
  }

  .logo-dot-1 {
    animation-delay: 0s;
  }

  .logo-dot-2 {
    animation-delay: 0.3s;
  }

  .logo-dot-3 {
    animation-delay: 0.6s;
  }

  @keyframes pulse-dot {
    0%, 100% {
      transform: scale(1);
      opacity: 0.9;
    }
    50% {
      transform: scale(1.3);
      opacity: 1;
    }
  }

  /* Logo Text Styles */
  .logo-text {
    font-weight: 800;
    letter-spacing: -0.03em;
    display: flex;
    align-items: baseline;
    gap: 0.2em;
    white-space: nowrap;
    position: relative;
  }

  .logo-text-primary {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradient-flow 4s ease infinite;
    font-weight: 900;
    position: relative;
  }

  .logo-text-secondary {
    color: var(--color-text);
    font-weight: 700;
    opacity: 0.6;
    transition: all 0.3s ease;
    font-size: 0.9em;
  }

  .logo-text-accent {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #ec4899 100%);
    background-size: 200% 200%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradient-flow 4s ease infinite;
    animation-delay: 0.5s;
    font-weight: 900;
  }

  @keyframes gradient-flow {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  /* Variant Styles */
  .logo-light .logo-text-studios {
    color: white;
    opacity: 0.95;
  }

  .logo-dark .logo-text-studios {
    color: #1a1a2e;
  }

  /* Size Variants */
  .logo-sm {
    gap: 0.625rem;
  }

  .logo-md {
    gap: 0.875rem;
  }

  .logo-lg {
    gap: 1.125rem;
  }

  /* Hover Effects */
  .logo-container:hover .logo-text-primary,
  .logo-container:hover .logo-text-accent {
    animation-duration: 2s;
  }

  .logo-container:hover .logo-text-secondary {
    opacity: 0.9;
    transform: scale(1.1);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .logo-container {
      gap: 0.625rem;
    }

    .logo-text {
      letter-spacing: -0.02em;
    }
  }

  /* Prevent animation performance issues */
  @media (prefers-reduced-motion: reduce) {
    .logo-layer-top,
    .logo-layer-middle,
    .logo-layer-bottom,
    .logo-center-dot,
    .logo-dot {
      animation: none;
    }

    .logo-icon,
    .logo-container,
    .logo-text-secondary {
      transition: none;
    }
  }
</style>
