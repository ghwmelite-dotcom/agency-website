---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
---

<BaseLayout title="AI Project Estimator - Get Instant Estimates" description="Get instant AI-powered project estimates with cost, timeline, and technology recommendations">
  <Header />
  <main>
  <div class="min-h-screen py-20 px-4" style="margin-top: var(--header-height);">
    <div class="max-w-4xl mx-auto">
      <!-- Hero Section -->
      <div class="text-center mb-12">
        <div class="inline-block mb-4">
          <span class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-full text-sm font-semibold">
            AI-Powered Estimation
          </span>
        </div>
        <h1 class="text-5xl font-bold text-white mb-6">
          Get Your Project Estimate
          <span class="bg-gradient-to-r from-purple-400 to-blue-400 text-transparent bg-clip-text">Instantly</span>
        </h1>
        <p class="text-xl text-gray-300 max-w-2xl mx-auto">
          Describe your project and receive a comprehensive AI-powered analysis including cost estimates, timeline, technology recommendations, and team requirements.
        </p>
      </div>

      <!-- Progress Indicator -->
      <div class="mb-8">
        <div class="flex justify-between items-center">
          <div class="flex-1">
            <div class="flex items-center">
              <div class="step-indicator active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Your Info</div>
              </div>
              <div class="step-line"></div>
            </div>
          </div>
          <div class="flex-1">
            <div class="flex items-center">
              <div class="step-indicator" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Project Details</div>
              </div>
              <div class="step-line"></div>
            </div>
          </div>
          <div class="flex-1">
            <div class="flex items-center justify-end">
              <div class="step-indicator" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Preferences</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Container -->
      <div class="bg-gray-800 rounded-2xl shadow-2xl p-8 border border-gray-700">
        <form id="estimateForm">
          <!-- Step 1: Basic Info -->
          <div class="form-step active" data-step="1">
            <h2 class="text-2xl font-bold text-white mb-6">Let's start with your information</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="name" class="block text-sm font-medium text-gray-300 mb-2">
                  Full Name <span class="text-red-400">*</span>
                </label>
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="John Doe"
                />
              </div>

              <div>
                <label for="email" class="block text-sm font-medium text-gray-300 mb-2">
                  Email Address <span class="text-red-400">*</span>
                </label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="john@company.com"
                />
              </div>

              <div>
                <label for="company" class="block text-sm font-medium text-gray-300 mb-2">
                  Company Name
                </label>
                <input
                  type="text"
                  id="company"
                  name="company"
                  class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="Acme Inc."
                />
              </div>

              <div>
                <label for="phone" class="block text-sm font-medium text-gray-300 mb-2">
                  Phone Number
                </label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                  placeholder="+1 (555) 123-4567"
                />
              </div>
            </div>

            <div class="flex justify-end mt-8">
              <button
                type="button"
                class="next-btn bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200 transform hover:scale-105"
              >
                Next Step →
              </button>
            </div>
          </div>

          <!-- Step 2: Project Details -->
          <div class="form-step" data-step="2">
            <h2 class="text-2xl font-bold text-white mb-6">Tell us about your project</h2>

            <div class="space-y-6">
              <div>
                <label for="project_type" class="block text-sm font-medium text-gray-300 mb-2">
                  Project Type <span class="text-red-400">*</span>
                </label>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  <label class="project-type-card">
                    <input type="radio" name="project_type" value="web" required class="hidden" />
                    <div class="card-content">
                      <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                      </svg>
                      <span>Web App</span>
                    </div>
                  </label>

                  <label class="project-type-card">
                    <input type="radio" name="project_type" value="mobile" class="hidden" />
                    <div class="card-content">
                      <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                      </svg>
                      <span>Mobile App</span>
                    </div>
                  </label>

                  <label class="project-type-card">
                    <input type="radio" name="project_type" value="both" class="hidden" />
                    <div class="card-content">
                      <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                      </svg>
                      <span>Both</span>
                    </div>
                  </label>

                  <label class="project-type-card">
                    <input type="radio" name="project_type" value="other" class="hidden" />
                    <div class="card-content">
                      <svg class="w-8 h-8 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                      </svg>
                      <span>Other</span>
                    </div>
                  </label>
                </div>
              </div>

              <div>
                <label for="project_description" class="block text-sm font-medium text-gray-300 mb-2">
                  Project Description <span class="text-red-400">*</span>
                </label>
                <p class="text-sm text-gray-400 mb-2">
                  Describe your project in detail. Include features, goals, target audience, and any specific requirements.
                </p>
                <textarea
                  id="project_description"
                  name="project_description"
                  required
                  rows="8"
                  class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
                  placeholder="Example: I need a mobile app for food delivery. Users should be able to browse restaurants, place orders, track delivery in real-time, and pay securely. The app needs to support both iOS and Android..."
                ></textarea>
                <div class="text-right text-sm text-gray-400 mt-1">
                  <span id="charCount">0</span> characters
                </div>
              </div>
            </div>

            <div class="flex justify-between mt-8">
              <button
                type="button"
                class="prev-btn bg-gray-700 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-all duration-200"
              >
                ← Previous
              </button>
              <button
                type="button"
                class="next-btn bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200 transform hover:scale-105"
              >
                Next Step →
              </button>
            </div>
          </div>

          <!-- Step 3: Preferences -->
          <div class="form-step" data-step="3">
            <h2 class="text-2xl font-bold text-white mb-6">Your preferences</h2>

            <div class="space-y-6">
              <div>
                <label class="block text-sm font-medium text-gray-300 mb-3">
                  Timeline Preference <span class="text-red-400">*</span>
                </label>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                  <label class="timeline-card">
                    <input type="radio" name="timeline_preference" value="asap" required class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">ASAP</span>
                    </div>
                  </label>

                  <label class="timeline-card">
                    <input type="radio" name="timeline_preference" value="1-3 months" class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">1-3 Months</span>
                    </div>
                  </label>

                  <label class="timeline-card">
                    <input type="radio" name="timeline_preference" value="3-6 months" class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">3-6 Months</span>
                    </div>
                  </label>

                  <label class="timeline-card">
                    <input type="radio" name="timeline_preference" value="6+ months" class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">6+ Months</span>
                    </div>
                  </label>
                </div>
              </div>

              <div>
                <label class="block text-sm font-medium text-gray-300 mb-3">
                  Budget Range <span class="text-red-400">*</span>
                </label>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                  <label class="budget-card">
                    <input type="radio" name="budget_range" value="under 10k" required class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">Under GH₵120k<br/>($10k)</span>
                    </div>
                  </label>

                  <label class="budget-card">
                    <input type="radio" name="budget_range" value="10k-25k" class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">GH₵120k - 300k<br/>($10k - $25k)</span>
                    </div>
                  </label>

                  <label class="budget-card">
                    <input type="radio" name="budget_range" value="25k-50k" class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">GH₵300k - 600k<br/>($25k - $50k)</span>
                    </div>
                  </label>

                  <label class="budget-card">
                    <input type="radio" name="budget_range" value="50k-100k" class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">GH₵600k - 1.2M<br/>($50k - $100k)</span>
                    </div>
                  </label>

                  <label class="budget-card">
                    <input type="radio" name="budget_range" value="100k+" class="hidden" />
                    <div class="card-content">
                      <span class="text-sm">GH₵1.2M+<br/>($100k+)</span>
                    </div>
                  </label>
                </div>
              </div>
            </div>

            <div class="flex justify-between mt-8">
              <button
                type="button"
                class="prev-btn bg-gray-700 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-all duration-200"
              >
                ← Previous
              </button>
              <button
                type="submit"
                id="submitBtn"
                class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-blue-700 transition-all duration-200 transform hover:scale-105 flex items-center gap-2"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                Generate Estimate
              </button>
            </div>
          </div>
        </form>

        <!-- Loading State -->
        <div id="loadingState" class="hidden text-center py-12">
          <div class="relative">
            <div class="animate-spin rounded-full h-20 w-20 border-b-2 border-purple-500 mx-auto"></div>
            <div class="absolute inset-0 flex items-center justify-center">
              <svg class="w-10 h-10 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
            </div>
          </div>
          <h3 class="text-2xl font-bold text-white mt-6 mb-2">Analyzing Your Project</h3>
          <p class="text-gray-400 mb-4">Our AI is carefully reviewing your requirements...</p>
          <div class="max-w-md mx-auto bg-gray-700 rounded-full h-2 overflow-hidden">
            <div id="progressBar" class="bg-gradient-to-r from-purple-500 to-blue-500 h-full rounded-full transition-all duration-500" style="width: 0%"></div>
          </div>
          <p id="progressText" class="text-sm text-gray-400 mt-2">Initializing...</p>
        </div>

        <!-- Results Display -->
        <div id="resultsContainer" class="hidden">
          <div class="text-center mb-8">
            <div class="inline-block mb-4">
              <svg class="w-16 h-16 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <h2 class="text-3xl font-bold text-white mb-2">Your Project Estimate is Ready!</h2>
            <p class="text-gray-400">Here's what our AI analysis suggests for your project</p>
          </div>

          <!-- Cost Estimate -->
          <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 rounded-xl p-6 mb-6 border border-purple-500/30">
            <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              Estimated Investment
            </h3>
            <div class="flex items-baseline gap-2">
              <span class="text-5xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 text-transparent bg-clip-text" id="costRange">
                $0 - $0
              </span>
            </div>
          </div>

          <div class="grid md:grid-cols-2 gap-6 mb-6">
            <!-- Timeline -->
            <div class="bg-gray-700/50 rounded-xl p-6 border border-gray-600">
              <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                Timeline
              </h3>
              <p class="text-3xl font-bold text-purple-400" id="timeline">0 weeks</p>
            </div>

            <!-- Team Size -->
            <div class="bg-gray-700/50 rounded-xl p-6 border border-gray-600">
              <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
                Team Size
              </h3>
              <p class="text-3xl font-bold text-blue-400" id="teamSize">0 people</p>
            </div>
          </div>

          <!-- Technology Stack -->
          <div class="bg-gray-700/50 rounded-xl p-6 border border-gray-600 mb-6">
            <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
              </svg>
              Recommended Technology Stack
            </h3>
            <div id="techStack" class="flex flex-wrap gap-2"></div>
          </div>

          <!-- Risk Assessment -->
          <div class="bg-gray-700/50 rounded-xl p-6 border border-gray-600 mb-6">
            <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
              </svg>
              Risk Level
            </h3>
            <div id="riskLevel"></div>
          </div>

          <!-- AI Analysis -->
          <div class="bg-gray-700/50 rounded-xl p-6 border border-gray-600 mb-6">
            <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
              Detailed Analysis
            </h3>
            <div id="aiAnalysis" class="text-gray-300 prose prose-invert max-w-none"></div>
          </div>

          <!-- CTA Section -->
          <div class="bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl p-8 text-center">
            <h3 class="text-2xl font-bold text-white mb-4">Ready to Get Started?</h3>
            <p class="text-white/90 mb-6">
              Let's discuss your project in detail and turn this estimate into reality.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
              <a
                href="/contact"
                class="bg-white text-purple-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-all duration-200 inline-block"
              >
                Schedule a Consultation
              </a>
              <button
                id="downloadPdfBtn"
                class="bg-purple-800 text-white px-8 py-3 rounded-lg font-semibold hover:bg-purple-900 transition-all duration-200 flex items-center gap-2 justify-center"
              >
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                Download PDF
              </button>
            </div>
          </div>

          <div class="text-center mt-6">
            <button
              id="newEstimateBtn"
              class="text-gray-400 hover:text-white transition-colors duration-200"
            >
              Start a New Estimate
            </button>
          </div>
        </div>
      </div>

      <!-- Trust Indicators -->
      <div class="mt-12 text-center">
        <p class="text-gray-400 text-sm mb-4">Trusted by innovative companies worldwide</p>
        <div class="flex justify-center items-center gap-8 text-gray-500">
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <span class="text-sm">SSL Secured</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-purple-500" fill="currentColor" viewBox="0 0 20 20">
              <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
            </svg>
            <span class="text-sm">GDPR Compliant</span>
          </div>
          <div class="flex items-center gap-2">
            <svg class="w-5 h-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
            </svg>
            <span class="text-sm">AI-Powered</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  </main>
  <Footer />

  <style>
    /* Step Indicator Styles */
    .step-indicator {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    .step-number {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: #374151;
      border: 2px solid #4B5563;
      color: #9CA3AF;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.25rem;
      transition: all 0.3s ease;
      margin-bottom: 8px;
    }

    .step-indicator.active .step-number {
      background: linear-gradient(135deg, #9333EA, #3B82F6);
      border-color: transparent;
      color: white;
      box-shadow: 0 0 20px rgba(147, 51, 234, 0.5);
    }

    .step-indicator.completed .step-number {
      background: #10B981;
      border-color: transparent;
      color: white;
    }

    .step-label {
      font-size: 0.875rem;
      color: #9CA3AF;
      font-weight: 500;
      white-space: nowrap;
    }

    .step-indicator.active .step-label {
      color: white;
      font-weight: 600;
    }

    .step-line {
      height: 2px;
      background: #4B5563;
      flex: 1;
      margin: 0 16px;
      margin-bottom: 32px;
      transition: all 0.3s ease;
    }

    .step-indicator.completed ~ .step-line {
      background: #10B981;
    }

    /* Form Step Styles */
    .form-step {
      display: none;
    }

    .form-step.active {
      display: block;
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Project Type Cards */
    .project-type-card,
    .timeline-card,
    .budget-card {
      cursor: pointer;
    }

    .project-type-card .card-content,
    .timeline-card .card-content,
    .budget-card .card-content {
      padding: 1.5rem;
      background: #374151;
      border: 2px solid #4B5563;
      border-radius: 0.75rem;
      text-align: center;
      color: #D1D5DB;
      font-weight: 600;
      transition: all 0.2s ease;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .project-type-card:hover .card-content,
    .timeline-card:hover .card-content,
    .budget-card:hover .card-content {
      border-color: #9333EA;
      background: #4B5563;
    }

    .project-type-card input:checked ~ .card-content,
    .timeline-card input:checked ~ .card-content,
    .budget-card input:checked ~ .card-content {
      border-color: #9333EA;
      background: linear-gradient(135deg, rgba(147, 51, 234, 0.2), rgba(59, 130, 246, 0.2));
      color: white;
      box-shadow: 0 0 20px rgba(147, 51, 234, 0.3);
    }

    /* Tech Stack Badges */
    .tech-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: linear-gradient(135deg, rgba(147, 51, 234, 0.2), rgba(59, 130, 246, 0.2));
      border: 1px solid rgba(147, 51, 234, 0.3);
      border-radius: 9999px;
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
    }

    /* Risk Level Badges */
    .risk-low {
      color: #10B981;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid #10B981;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      display: inline-block;
      font-weight: 600;
    }

    .risk-medium {
      color: #F59E0B;
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid #F59E0B;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      display: inline-block;
      font-weight: 600;
    }

    .risk-high {
      color: #EF4444;
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid #EF4444;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      display: inline-block;
      font-weight: 600;
    }

    /* Prose styles for AI analysis */
    .prose p {
      margin-bottom: 1rem;
      line-height: 1.75;
    }

    .prose ul {
      list-style: disc;
      margin-left: 1.5rem;
      margin-bottom: 1rem;
    }

    .prose li {
      margin-bottom: 0.5rem;
    }
  </style>

  <script>
    let currentStep = 1;
    const totalSteps = 3;

    // Character counter
    const textarea = document.getElementById('project_description');
    const charCount = document.getElementById('charCount');

    if (textarea && charCount) {
      textarea.addEventListener('input', () => {
        charCount.textContent = textarea.value.length;
      });
    }

    // Step navigation
    function updateStepIndicators() {
      document.querySelectorAll('.step-indicator').forEach((indicator, index) => {
        const stepNum = index + 1;
        indicator.classList.remove('active', 'completed');

        if (stepNum < currentStep) {
          indicator.classList.add('completed');
        } else if (stepNum === currentStep) {
          indicator.classList.add('active');
        }
      });

      document.querySelectorAll('.form-step').forEach((step, index) => {
        step.classList.remove('active');
        if (index + 1 === currentStep) {
          step.classList.add('active');
        }
      });
    }

    // Next button handlers
    document.querySelectorAll('.next-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const currentStepElement = document.querySelector(`.form-step[data-step="${currentStep}"]`);
        const inputs = currentStepElement.querySelectorAll('input[required], textarea[required]');
        let valid = true;

        inputs.forEach(input => {
          if (!input.value.trim() || (input.type === 'radio' && !currentStepElement.querySelector(`input[name="${input.name}"]:checked`))) {
            valid = false;
            input.classList.add('border-red-500');
          } else {
            input.classList.remove('border-red-500');
          }
        });

        if (valid && currentStep < totalSteps) {
          currentStep++;
          updateStepIndicators();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    });

    // Previous button handlers
    document.querySelectorAll('.prev-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        if (currentStep > 1) {
          currentStep--;
          updateStepIndicators();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    });

    // Form submission
    const form = document.getElementById('estimateForm');
    const loadingState = document.getElementById('loadingState');
    const resultsContainer = document.getElementById('resultsContainer');
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Hide form, show loading
      form.style.display = 'none';
      loadingState.classList.remove('hidden');

      // Animate progress bar
      const progressSteps = [
        { width: 25, text: 'Analyzing project requirements...' },
        { width: 50, text: 'Evaluating complexity and scope...' },
        { width: 75, text: 'Calculating estimates and recommendations...' },
        { width: 100, text: 'Finalizing your estimate...' }
      ];

      let stepIndex = 0;
      const progressInterval = setInterval(() => {
        if (stepIndex < progressSteps.length) {
          progressBar.style.width = `${progressSteps[stepIndex].width}%`;
          progressText.textContent = progressSteps[stepIndex].text;
          stepIndex++;
        }
      }, 1500);

      try {
        const formData = new FormData(form);
        const data = Object.fromEntries(formData);

        const response = await fetch('/api/estimate-project', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        });

        const result = await response.json();

        clearInterval(progressInterval);
        progressBar.style.width = '100%';

        if (response.ok) {
          // Display results
          setTimeout(() => {
            loadingState.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
            displayResults(result);
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }, 1000);
        } else {
          throw new Error(result.message || 'Failed to generate estimate');
        }
      } catch (error) {
        clearInterval(progressInterval);
        alert('Sorry, there was an error generating your estimate. Please try again or contact us directly.');
        loadingState.classList.add('hidden');
        form.style.display = 'block';
        console.error('Error:', error);
      }
    });

    function displayResults(data) {
      const exchangeRate = 12; // 1 USD = 12 GH₵

      // Helper function to format dual currency
      const formatDualCurrency = (usd) => {
        const cedis = usd * exchangeRate;
        return `GH₵${cedis.toLocaleString()} ($${usd.toLocaleString()})`;
      };

      // Cost Range
      const minCedis = (data.estimated_cost_min || 0) * exchangeRate;
      const maxCedis = (data.estimated_cost_max || 0) * exchangeRate;
      document.getElementById('costRange').textContent =
        `GH₵${minCedis.toLocaleString()} - GH₵${maxCedis.toLocaleString()} ($${(data.estimated_cost_min || 0).toLocaleString()} - $${(data.estimated_cost_max || 0).toLocaleString()})`;

      // Timeline
      document.getElementById('timeline').textContent =
        `${data.estimated_timeline_weeks || 0} weeks`;

      // Team Size
      document.getElementById('teamSize').textContent =
        `${data.team_size_needed || 0} ${data.team_size_needed === 1 ? 'person' : 'people'}`;

      // Technology Stack
      const techStack = document.getElementById('techStack');
      if (data.technology_stack && data.technology_stack.length > 0) {
        techStack.innerHTML = data.technology_stack
          .map(tech => `<span class="tech-badge">${tech}</span>`)
          .join('');
      } else {
        techStack.innerHTML = '<span class="text-gray-400">To be determined based on detailed requirements</span>';
      }

      // Risk Level
      const riskLevel = document.getElementById('riskLevel');
      const riskClass = `risk-${data.risk_level || 'medium'}`;
      riskLevel.innerHTML = `<span class="${riskClass}">${(data.risk_level || 'medium').toUpperCase()} RISK</span>`;

      // AI Analysis
      const aiAnalysis = document.getElementById('aiAnalysis');
      if (data.ai_analysis && data.ai_analysis.summary) {
        aiAnalysis.innerHTML = formatAnalysis(data.ai_analysis.summary);
      } else {
        aiAnalysis.innerHTML = '<p>Analysis details will be provided in your consultation.</p>';
      }

      // Store estimate ID for PDF download
      if (data.id) {
        document.getElementById('downloadPdfBtn').dataset.estimateId = data.id;
      }
    }

    function formatAnalysis(text) {
      // Convert line breaks and basic formatting
      return text
        .replace(/\n\n/g, '</p><p>')
        .replace(/\n/g, '<br>')
        .replace(/^/, '<p>')
        .replace(/$/, '</p>');
    }

    // New estimate button
    document.getElementById('newEstimateBtn')?.addEventListener('click', () => {
      currentStep = 1;
      updateStepIndicators();
      form.reset();
      form.style.display = 'block';
      resultsContainer.classList.add('hidden');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // PDF Download (placeholder - implement with actual PDF generation)
    document.getElementById('downloadPdfBtn')?.addEventListener('click', () => {
      alert('PDF download feature will be implemented. For now, please take a screenshot or contact us for a detailed proposal.');
    });

    // Initialize
    updateStepIndicators();
  </script>
</BaseLayout>
